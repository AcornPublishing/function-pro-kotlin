package chapter5

import chapter3.List
import chapter3.reverse
import chapter3.Cons as ConsL
import chapter3.Nil as NilL

fun <A> Stream<A>.toList(): List<A> {
    tailrec fun go(xs: Stream<A>, acc: List<A>): List<A> = when (xs) {
        is Empty -> acc
        is Cons -> go(xs.tail(), ConsL(xs.head(), acc))
    }
    return reverse(go(this, NilL))
}
